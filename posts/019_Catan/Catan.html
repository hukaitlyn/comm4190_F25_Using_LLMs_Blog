<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kaitlyn Hu">
<meta name="dcterms.date" content="2025-11-03">
<meta name="description" content="I’ve been playing a lot of CATAN with my roommates and finally decided I want to get better. So I asked an LLM to act as my gaming mastermind and teach me real strategies for placements, trading, and actually winning more than once in a while.">

<title>My New Gaming Mastermind: An LLM – Coffee, Curiosity, and Chatbots!</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-fa6ebe1abc24c69c1ddb9a141d0fa116.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Coffee, Curiosity, and Chatbots!</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About the Author</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.instagram.com/_kaitlynhu/"> <i class="bi bi-instagram" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/hukaitlyn"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">My New Gaming Mastermind: An LLM</h1>
                  <div>
        <div class="description">
          I’ve been playing a lot of CATAN with my roommates and finally decided I want to get better. So I asked an LLM to act as my gaming mastermind and teach me real strategies for placements, trading, and actually winning more than once in a while.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">Games</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Kaitlyn Hu </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 3, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="catan.avif" class="img-fluid"></p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction"><strong>Introduction:</strong></h2>
<p>Lately my roommates and I have been playing a lot of CATAN, and I finally admitted to myself that I have no idea what I’m doing. I place my settlements wherever looks “fine,” hope for good rolls, and somehow always end up stuck without the resources everyone else has. So I figured it might be fun to see whether an LLM could actually make me better at the game.</p>
<p>For this post, I treated the AI like a strategy coach. I had it ask me a few questions about how I usually play and what I struggle with, and then I let it build a plan for how I should think about placements, trades, and long-term strategy. I’m curious to see whether any of it makes a real difference the next time we play.</p>
</section>
<section id="prompt" class="level2">
<h2 class="anchored" data-anchor-id="prompt"><strong>Prompt:</strong></h2>
<blockquote class="blockquote">
<p>I’ve been playing CATAN with my roommates and want to get better at the game. Before you give me any advice, ask me three to five questions about how I usually play, where I struggle, what decisions I make during setup, and what my overall playstyle is. After I answer, give me specific strategies tailored to my habits. Include guidance on starting placement, resource balance, trading, expansion timing, road building, and how to adapt depending on the board. Keep the advice practical and something I can actually use in my next game.</p>
</blockquote>
<section id="getting-to-know-my-play-style" class="level4">
<h4 class="anchored" data-anchor-id="getting-to-know-my-play-style">Getting to Know My Play Style:</h4>
<blockquote class="blockquote">
<p><strong>What’s your primary goal when you sit down to play?</strong> I’m still new, so I mostly try to collect as many resources as possible. I usually start with roads and place settlements wherever I can.</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>What do you look for in your first two settlement placements?</strong> I try to get a mix of resources. I don’t understand numbers very well yet, so I focus on brick, wheat, wood, and ore.</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Where do you usually fall behind?</strong> I’m often still waiting on the right resource mix just to build my next settlement.</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>What’s your usual approach to trading?</strong> I’m not a strong trader. I don’t hoard on purpose—I just never have the right cards. I mainly trade with players and forget about ports and bank trades.</p>
</blockquote>
</section>
</section>
<section id="response" class="level2">
<h2 class="anchored" data-anchor-id="response"><strong>Response:</strong></h2>
<p>Okay, this gives me a fantastic picture of your current playstyle! It’s very common for new players to focus on just collecting resources and building roads, and struggling with the “right mix” for expansion.</p>
<p>Here’s some practical, actionable advice tailored to your habits, designed to help you break through those bottlenecks and start playing more strategically:</p>
<hr>
<section id="tailored-strategies-for-your-catan-game" class="level3">
<h3 class="anchored" data-anchor-id="tailored-strategies-for-your-catan-game">Tailored Strategies for Your Catan Game</h3>
<p>Your main challenge seems to be transitioning from simply collecting resources to building a reliable <em>resource engine</em> that allows you to expand and score points. Let’s tackle that!</p>
<section id="starting-placement-beyond-just-a-mix-think-engine" class="level4">
<h4 class="anchored" data-anchor-id="starting-placement-beyond-just-a-mix-think-engine">1. Starting Placement: Beyond Just a Mix, Think <em>Engine</em></h4>
<p>You’re right to prioritize a mix of resources, but let’s refine that with the “number strategy.”</p>
<ul>
<li><strong>Understand the Numbers (Probability):</strong>
<ul>
<li>The numbers on the resource hexes correspond to the probability of rolling that number with two dice.</li>
<li><strong>Most Likely:</strong> 6 and 8 (5 out of 36 chance each)</li>
<li><strong>Next Most Likely:</strong> 5 and 9 (4 out of 36 chance each)</li>
<li><strong>Less Likely:</strong> 4 and 10 (3 out of 36 chance each)</li>
<li><strong>Least Likely:</strong> 3 and 11 (2 out of 36 chance each), 2 and 12 (1 out of 36 chance each)</li>
<li><strong>Actionable Tip:</strong> When choosing your first two settlements, <strong>prioritize spots that have at least two high-probability numbers (6s, 8s, 5s, 9s) under them.</strong> A spot on a 6, 8, and 5 is gold! A spot on a 2, 12, and 3 is very risky.</li>
</ul></li>
<li><strong>Focus Your Engine for Early Expansion:</strong>
<ul>
<li>Your goal is to build settlements (1 Wood, 1 Brick, 1 Wheat, 1 Sheep). To do this reliably, you need a strong production of these four.</li>
<li><strong>First Settlement:</strong> Aim for a spot that gives you <strong>strong Wood and Brick production</strong> (to build roads) AND <strong>strong Wheat/Sheep</strong> (for the settlement itself). A good starting combo might be:
<ul>
<li><strong>Spot 1:</strong> High-probability Wood, Brick, and Wheat. (e.g., 6 Wood, 8 Brick, 5 Wheat)</li>
<li><strong>Spot 2 (on your return pick):</strong> High-probability Sheep, and ideally another high-probability of one of the previous three (Wood, Brick, Wheat) to bolster your engine. This ensures you have all four settlement resources covered with decent odds.</li>
</ul></li>
<li><strong>Avoid “Spread Too Thin”:</strong> Don’t try to get <em>every</em> resource with your first two placements if it means sacrificing high-probability numbers. It’s better to have strong production of 3-4 key resources and trade for the rest, than weak production of all 5.</li>
</ul></li>
</ul>
</section>
<section id="resource-balance-expansion-timing-break-the-waiting-cycle" class="level4">
<h4 class="anchored" data-anchor-id="resource-balance-expansion-timing-break-the-waiting-cycle">2. Resource Balance &amp; Expansion Timing: Break the “Waiting” Cycle</h4>
<p>You mentioned often waiting for the right mix of resources. This is where a focused engine and proactive trading come in.</p>
<ul>
<li><strong>Identify Your Next Goal, Then Your Resource Needs:</strong> Instead of just “collecting as many resources,” ask yourself: “What do I want to build next?”
<ul>
<li><strong>If a Settlement:</strong> You need 1 Wood, 1 Brick, 1 Wheat, 1 Sheep.</li>
<li><strong>If a City:</strong> You need 2 Wheat, 3 Ore.</li>
<li><strong>If a Development Card:</strong> You need 1 Wheat, 1 Sheep, 1 Ore.</li>
</ul></li>
<li><strong>Actionable Tip: Prioritize Settlements Early.</strong> A new settlement gives you 1 point and, crucially, <strong>starts producing resources from that new hex.</strong> This rapidly accelerates your engine. Don’t build roads aimlessly; build them <em>towards</em> a specific, valuable new settlement spot.</li>
<li><strong>The “2 Roads, 1 Settlement” Cycle:</strong> A common and effective early game strategy is to build two roads to reach a new settlement spot, then build the settlement. This means your engine needs to reliably produce: (1 Wood + 1 Brick) for the first road, then (1 Wood + 1 Brick) for the second road, then (1 Wood + 1 Brick + 1 Wheat + 1 Sheep) for the settlement. If you can get this cycle going, you’ll expand rapidly.</li>
</ul>
</section>
<section id="trading-be-proactive-not-just-reactive" class="level4">
<h4 class="anchored" data-anchor-id="trading-be-proactive-not-just-reactive">3. Trading: Be Proactive, Not Just Reactive</h4>
<p>This is a game-changer for new players! You’re currently waiting for the right things or for others to offer. Let’s flip that.</p>
<ul>
<li><strong>Actionable Tip: Announce Your Needs and Offers Aggressively.</strong>
<ul>
<li><strong>“I need X for Y.”</strong> Instead of “Anyone have Wheat?”, try “I need a Wheat for a settlement, who can help?” This tells people your goal and might make them more willing to trade.</li>
<li><strong>“I’ll trade Z for X.”</strong> If you have 3 Wood and need a Wheat, say “I’ll give 2 Wood for 1 Wheat!” (Start high, you can always go down). Or “I have plenty of Ore, who needs Ore?”</li>
<li><strong>Don’t Be Afraid to Overpay Slightly (Early Game):</strong> If you need one specific resource to complete a settlement and get your engine going, giving up two of something you have in abundance for one of what you desperately need is often worth it. That new settlement will pay for itself!</li>
</ul></li>
<li><strong>Don’t Forget Ports!</strong>
<ul>
<li><strong>Actionable Tip: Identify Your Port Resource.</strong> If you’re sitting on a hex that produces a lot of one resource (e.g., you have two settlements on Sheep hexes), try to get to the <strong>Sheep port (2:1 trade).</strong> This effectively makes your abundant resource twice as valuable!</li>
<li><strong>General 3:1 Port:</strong> If you don’t have a specific resource port, try to build to a 3:1 port. This is always better than the 4:1 bank trade.</li>
<li><strong>When to Use Ports:</strong> Use them when other players aren’t offering what you need, or when you have a huge surplus of one resource that no one wants. It’s often better than letting cards sit in your hand and potentially getting robbed.</li>
</ul></li>
<li><strong>Bank Trades (4:1):</strong>
<ul>
<li><strong>Actionable Tip: Last Resort, But Don’t Forget It!</strong> If you have 8 Wood and desperately need 1 Ore, and no one will trade, and you’re not on a port, turn in 4 Wood for 1 Ore. It’s inefficient, but sometimes it’s the only way to make a build happen.</li>
</ul></li>
</ul>
</section>
<section id="road-building-strategic-pathways-not-just-wherever-possible" class="level4">
<h4 class="anchored" data-anchor-id="road-building-strategic-pathways-not-just-wherever-possible">4. Road Building: Strategic Pathways, Not Just “Wherever Possible”</h4>
<p>Your current approach of “roads first and then settlements wherever it seems possible” can be inefficient.</p>
<ul>
<li><strong>Actionable Tip: Build Roads with a Purpose.</strong>
<ul>
<li><strong>Identify Target Spots:</strong> Look for future settlement spots that are on high-probability numbers, give you a new resource, or connect to a port.</li>
<li><strong>Block Opponents:</strong> If an opponent is clearly trying to reach a prime spot, sometimes building a road to block them is more valuable than placing a settlement immediately.</li>
<li><strong>Longest Road:</strong> Don’t chase Longest Road too early unless your starting placement naturally allows for it. Settlements are worth points <em>and</em> resources. Longest Road is just points. Focus on settlements first.</li>
</ul></li>
</ul>
</section>
<section id="adapting-to-the-board-opponents" class="level4">
<h4 class="anchored" data-anchor-id="adapting-to-the-board-opponents">5. Adapting to the Board &amp; Opponents</h4>
<ul>
<li><strong>Resource Scarcity/Abundance:</strong>
<ul>
<li><strong>Actionable Tip:</strong> At the start of the game, look at the board. If there’s very little Sheep, Sheep will be valuable! If there’s tons of Wood, it will be less valuable unless someone needs it for Longest Road. Plan your trades and placements accordingly. If Sheep is scarce, getting a reliable Sheep source is key for settlements and dev cards.</li>
</ul></li>
<li><strong>The Robber:</strong>
<ul>
<li><strong>Actionable Tip: Protect Your Engine.</strong> If you have a settlement on a 6 Ore and an 8 Wheat, that’s your engine! If an opponent rolls a 7, they will likely place the robber on one of those spots. Try to spread out your vital resources across different numbers if possible.</li>
<li><strong>Robber Placement (When You Roll a 7):</strong> Always place the robber on the <strong>highest-producing number of the player who is currently in the lead or is your biggest threat.</strong> Take the resource they likely need most. Don’t just place it randomly.</li>
</ul></li>
<li><strong>Watch Your Opponents:</strong>
<ul>
<li><strong>Actionable Tip:</strong> Pay attention to what resources your opponents are collecting and what they are building.
<ul>
<li>If someone is hoarding Wheat and Ore, they’re probably going for cities.</li>
<li>If someone is building a lot of roads, they need Wood and Brick.</li>
<li>This intel helps you with trading (“I know they need Wood, so I can ask for more for it!”) and robber placement.</li>
</ul></li>
</ul></li>
</ul>
<hr>
<p><strong>Your Next Game Checklist:</strong></p>
<ol type="1">
<li><strong>Initial Placement:</strong> Focus on 2-3 high-probability numbers (6s, 8s, 5s, 9s) for your first two settlements. Ensure you have a strong production of Wood, Brick, Wheat, and Sheep.</li>
<li><strong>Goal-Oriented Building:</strong> Ask “What do I want to build next?” (Settlement, City, Dev Card) and identify the specific resources you need.</li>
<li><strong>Proactive Trading:</strong> Announce your needs and offers. Don’t just wait. “I need 1 Wheat for a settlement, who has it?”</li>
<li><strong>Ports:</strong> If you have an abundance of one resource, identify a port to build towards. Use 3:1 or 2:1 ports before 4:1 bank trades.</li>
<li><strong>Strategic Roads:</strong> Build roads with a purpose – to reach a specific, valuable new settlement spot, or to block an opponent.</li>
</ol>
<p>You’ve got this! Catan is all about building an efficient engine and making smart trades. By focusing on these points, you’ll see a significant improvement in your ability to expand and score points. Good luck!</p>
</section>
</section>
</section>
<section id="reflection" class="level2">
<h2 class="anchored" data-anchor-id="reflection"><strong>Reflection:</strong></h2>
<div style="float: right; margin-left: 20px; width: 180px;">
<img src="playing.png" style="width: 100%; border-radius: 12px;">
<p style="font-size: 12px; text-align: center;">
game nights!
</p>
</div>
<p>I honestly didn’t expect Catan advice to feel this detailed or this specific, but it actually made me realize how random my gameplay has been so far. I’ve mostly just been building whatever I can whenever I can, so hearing about things like “resource engines” and probability numbers made the whole game make a lot more sense. I also finally understand why I’m always stuck waiting for that one missing resource.</p>
<p>What I appreciated most is that a lot of this advice was immediately actionable and didn’t feel overwhelming. It surprised me how much of Catan is about intention rather than luck, and it makes me excited to try again with an actual plan instead of hoping my tiles magically pay out. I definitely see why people get so into this game, and I’m curious to see if these tips actually help me play with a little more strategy next time.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/hukaitlyn\.github\.io\/comm4190_F25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>